{% load dictionary_extras %}

<!DOCTYPE html> 
<html> 

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1"> 
	<title>Search your photos</title> 
	<script src="//code.jquery.com/jquery-1.10.2.min.js"></script>
<style>
	html, body { padding: 0; margin: 0; }
	html, .ui-mobile, .ui-mobile body {
	}
	.ui-mobile, .ui-mobile .ui-page {
	}
	.ui-content{
		padding:0px 0px 0px 0px;
	}
	.ui-filter-inset {
		margin-top: 0;
	}
	.ui-gallery{
		/*overflow: auto;*/
	}
	.ui-photo-block {
		float: left;
	}
	.ui-time-header {
		font-family: arial;
		padding: 10px 0px 10px 10px;
	}
	.ui-image {
		padding-right: 2px;
		height: {{ imageSize|add:+2 }}px;
		float:left;
	}
	.text {
		font-family: arial;
	}
	.hidden {
		display: none;
	}

	a:link{
		text-decoration: none;
		font-weight: bold;
		color: #0000FF;
	}
	a.visited {
		text-decoration: none;
		font-weight: bold;
		color: #0000FF;	
	}
	</style>
</head>

<body>

<div role="main" class="ui-content">
		<div class="ui-gallery" id="allImages">
		{% for entry in photoResults %}
			<div class="ui-photo-block hidden" id="ui-photo-block-{{ forloop.counter0 }}">
				<div class="ui-time-header">
					{{ entry.date }} ({{ entry.count }})
				</div>
				{% for photo in entry.photos %}
					<div class = "ui-image">
						<a href="{{ thumbnailBasepath }}{{ photo.photoFilename }}"> 
							<img data-lazy-src="{{ thumbnailBasepath }}{{ photoIdToThumb|lookup:photo.photoId }}" class="lazy" height="{{ imageSize }}px" width="{{ imageSize }}px"></a>
					</div>
				{% endfor %}
			</div>
		{% endfor %}

	</div>

	<div class="result-bottom"> 
		{% if resultSize == 0 %}
			<p class="text"> No results found! </p>
		{% endif %}
	</div>

</div>

</body>
	<script>
		$('#allImages').children().each(function(){
			$(this).removeClass('hidden');
			$(this).find('img.lazy').each(function() {
				$(this).attr('src', $(this).attr('data-lazy-src'));	
			});
		});
		</script>
</html>