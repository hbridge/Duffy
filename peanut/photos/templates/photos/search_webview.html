<!DOCTYPE html> 
<html> 

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1"> 
	<title>Search your photos</title> 
	<!--<link rel="stylesheet" href="//code.jquery.com/mobile/1.4.0/jquery.mobile-1.4.0.min.css" />-->
	<script src="//code.jquery.com/jquery-1.10.2.min.js"></script>
	<!--
	<script src="//code.jquery.com/mobile/1.4.0/jquery.mobile-1.4.0.min.js"></script>
	<script src="http://photos.derektest1.com/js/jquery.lazyload.js"></script>
	-->


	<script>

		$(document).ready($(function() {
			$('img').each(function(){
				oldName = $(this).attr('fname').split(".");
				newName = oldName[0]+"-thumb-{{ imageSize|add:imageSize }}.jpg"
				$(this).attr('src', $(this).attr('path') + newName);
			});
	    	//$("img.lazy").lazyload();
		}));
	</script>
<style>
	html, body { padding: 0; margin: 0; }
	html, .ui-mobile, .ui-mobile body {
	}
	.ui-mobile, .ui-mobile .ui-page {
	}
	.ui-content{
		padding:0px 0px 0px 0px;
	}
	.ui-filter-inset {
		margin-top: 0;
	}
	.ui-gallery{
		/*overflow: auto;*/
	}
	.ui-image {
		padding-right: 2px;
		height: {{ imageSize|add:+2 }}px;
		float:left;
	}
	.result-bottom, .prev-next {
		text-align: center;
		clear:both;
	}
	.text, .prev-next {
		font-family: arial;
	}
	.prev-next {
		width: 100%;
		padding-bottom: 10px;
	}
	.prev {
		border-right: 1px solid #000000;
		padding-right: 6px;
		width: 49%;
		float:left;
		text-align: right;
	}
	.next {
		padding-left: 6px;
		text-align: left;
		overflow: hidden;
	}
	a:link{
		text-decoration: none;
		font-weight: bold;
		color: #0000FF;
	}
	a.visited {
		text-decoration: none;
		font-weight: bold;
		color: #0000FF;	
	}
	</style>
</head>

<body>

<div role="main" class="ui-content">
	<div class="ui-gallery" id="allImages">

		{% for result in searchResults %}

		<div class = "ui-image">
			<a href="{{ thumbnailBasepath }}{{ result.photoFilename }}"> 
			<!--<a href="/viz/serve_image?photo={{ result.photoFilename }}" rel="external"> -->
 			 	<img path="{{ thumbnailBasepath }}" fname="{{ result.photoFilename }}" data-origi="{{ thumbnailBasepath }}{{ result.photoFilename }}" class="lazyo" width="{{ imageSize }}px"></a>
 		</div>

		{% endfor %}
		
	</div>

	<div class="result-bottom"> 
		{% if resultSize > 0 %}
			<p class="text">Showing {{ start }} - {{ end }} of {{ resultSize }} photos</p>
			<div class="prev-next">
				<div class="prev">
					{% if previous %}
						<a href="/viz/search?user_id={{ userId }}&amp;q={{ query }}&amp;page={{ page|add:-1 }}">Previous</a>
					{% elif next %}
						Previous
					{% else %}
					{% endif %}
				</div><div class="next">
					{% if next %}
						<a href="/viz/search?user_id={{ userId }}&amp;q={{ query }}&amp;page={{ page|add:1 }}">Next</a>
					{% elif previous %}
						Next
					{% else %}
					{% endif %}
				</div>
			</div>
		{% else %}
			<p class="text"> No results found! </p>
		{% endif %}
	</div>

</div>

</body>
</html>