{% load dictionary_extras %}
{% load staticfiles %}

<div class="ui-photo-block hidden">
	<div class="ui-time-header">
		{{ entry.date }} ({{ entry.clusterList|length }})
	</div>
	{% for cluster in entry.clusterList %}
		{% for imageEntry in cluster %}
			{% if imageEntry.dist == None or imageEntry.dist >= 40 %} 
				<div class = "ui-image {% if imageEntry.dist == None and cluster|length > 1 %} cluster{% elif imageEntry.dist != None %}hidden {% else %} {% endif %}" redirect="{{ thumbnailBasepath }}{{ imageEntry.photo.photoId }}.jpg" photoId="{{ imageEntry.photo.photoId }}">
						<img data-lazy-src="{{ thumbnailBasepath }}{{ imageEntry.photo.photoId }}-thumb-156.jpg" class="lazy{% if imageEntry.dist != None %}-cluster{% endif %}" height="{{ imageSize }}px" width="{{ imageSize }}px" 
						title="ID: {{ imageEntry.photo.photoId }}  | TEXT: {{ imageEntry.photo.text }} | TIME: {{ imageEntry.photo.timeTaken }} | ORIG_CLASSIFICATIONS: {{ imageEntry.photo.classificationData }} | SIMROW: {{ imageEntry.simrow }}" >
					
					{% if imageEntry.dist == None and cluster|length > 1 %}
						<div class="ui-image-page-turn">
							<img src="{% static "page-fold-th.png" %}" height="100%" width="100%" />
						</div>
						<div class="ui-image-count text">
							{{ cluster|length }}
						</div>
					{% endif %}
				</div>
			{% endif %}
		{% endfor %}
	{% endfor %}
</div>