<html>
<head>
<meta http-equiv="refresh" content="10">
	<title>Duffy Summary</title> 
</head>
<style>
	html, body { padding: 0; margin: 0; font-family: arial; font-size: 12px;}
	table {
		border-collapse: collapse;
	}
	table, th, td {
		border: 1px solid black;
		font-size: 12px;
	}
	td {
		padding: 0px 5px 0px 5px;
	}
	.ui-row-external {
		background-color: #C0C0C0;
	}
	.ui-content {
		padding: 10px 0px 0px 10px;
	}
	.ui-table tr:hover {
		background-color: #b8d1f3;
	}
	.ui-row {

	}
	.ui-row-header {
		font-weight: bold;
		font-size: 12px;
	}
	.ui-key {
		padding: 0px 0px 10px 0px;
	}
	.red {
		color: red;
	}
	#stats{
		text-align: right;
		font-size: 10px;
	}
	.right{
		text-align: right;
	}
	.center{
		text-align: center;
	}

</style>
<script src="//code.jquery.com/jquery-1.10.2.min.js"></script>
<script src="http://asood123.no-ip.biz/static/jquery.timeago.js"></script>
<body>
<div class="ui-content">
	<div class="ui-key">
		Key: <span style='background-color: #C0C0C0;'> Shaded</span> rows are external users.
	</div>
	<table class='ui-table' cellpadding='3'>
		<tr class='ui-row-header' >
			<td class='userid'> UserId </td>
			<td class='name'> Name </td>
			<td class='phoneid'> PhoneId </td>
			<td class='created'> Created </td>
			<td class='db-count'> DBPhotos </td>
			<td class='db-thumbnails'> Thumbs <br> (%)</td>
			<td class='twofish'> TwoFish <br> (%) </td>
			<td class='clustered'> Clustered <br> (%)  </td>
			<td class='index-count'> Indexed <br> Photos (%) </td>
			<td class='faces'> Face <br> Rec (%)  </td>
			<td class='db-fullimage'> Full <br>images (%) </td>
			<td class='overfeat'> Overfeat <br> Num (%)  </td>
			<td class='classifications'> Image <br> Rec (%)  </td>
			<td class='last-uploaded-timestamp'> Last Upload </td>
			<td class='last-updated-timestamp'> Last updated </td>			
		</tr>
	{% for entry in resultList %}
		<tr class='ui-row {% if entry.internal == False %} ui-row-external {% endif %}'>
			<td class='userid'> {{ entry.user.id }} </td>
			<td class='name'> {{ entry.user.first_name}} {{ entry.user.last_name }} </td>
			<td class='phoneid' title='{{ entry.user.phone_id }}'> {{ entry.user.phone_id|truncatechars:12}} </td>
			<td class='created timeago' title="{{ entry.userCreated }}">  </td>
			<td class='db-count right'> {{ entry.dbCount }} </td>
			<td class='db-thumbnails right percent' title='{{ entry.thumbsCount }}'> {{ entry.thumbs }} </td>
			<td class='twofish right percent'>{{ entry.twofish }} </td>
			<td class='clustered right percent' title='{{ entry.clusteredCount }}'> {{ entry.clustered }} </td>
			<td class='index-count right percent'> {{ entry.resultsCount }} </td>
			<td class='faces right percent'> {{ entry.faces }} </td>
			<td class='db-fullimage right' title='{{ entry.fullimagesCount }}'> {{ entry.fullimages }} </td>	
			<td class='overfeat right percent' title="{{ entry.overfeatCount }} "> {{ entry.overfeat }} </td>		
			<td class='classifications right percent'> {{ entry.classifications }} </td>
			<td class='last-uploaded-timestamp timeago' title="{{ entry.lastUploadTime }}"> </td>
			<td class='last-updated-timestamp timeago' title="{{ entry.lastUpdatedTime }}"> </td>			
		</tr>
	{% endfor %}
	</table>
<div id="stats" class="text">
	<!-- STATS: Total time: %(total_time).2fs | Python: %(python_time).2fs | DB: %(db_time).2fs | Queries: %(db_queries)d ENDSTATS -->
</div>
</div>


</body>
<script>

$(document).ready(function() {
  $("td.timeago").timeago();
  $("td.percent").each(function(){
  	if ($.trim($(this).text()) != '100') {
  		$(this).addClass("red");
  	}
  });
});
</script>
</html>